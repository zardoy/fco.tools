(function(){"use strict";let o;function U(t){const e=o.__externref_table_alloc();return o.__wbindgen_externrefs.set(e,t),e}function I(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const _=t.description;return _==null?"Symbol":`Symbol(${_})`}if(e=="function"){const _=t.name;return typeof _=="string"&&_.length>0?`Function(${_})`:"Function"}if(Array.isArray(t)){const _=t.length;let s="[";_>0&&(s+=I(t[0]));for(let i=1;i<_;i++)s+=", "+I(t[i]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n&&n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function x(t,e){return t=t>>>0,M().subarray(t/4,t/4+e)}function F(t,e){return t=t>>>0,w().subarray(t/1,t/1+e)}let u=null;function f(){return(u===null||u.buffer.detached===!0||u.buffer.detached===void 0&&u.buffer!==o.memory.buffer)&&(u=new DataView(o.memory.buffer)),u}let d=null;function M(){return(d===null||d.byteLength===0)&&(d=new Float32Array(o.memory.buffer)),d}function y(t,e){return t=t>>>0,z(t,e)}let p=null;function w(){return(p===null||p.byteLength===0)&&(p=new Uint8Array(o.memory.buffer)),p}function m(t,e){try{return t.apply(this,e)}catch(n){const r=U(n);o.__wbindgen_exn_store(r)}}function g(t){return t==null}function E(t,e){const n=e(t.length*1,1)>>>0;return w().set(t,n/1),b=t.length,n}function D(t,e){const n=e(t.length*4,4)>>>0;return M().set(t,n/4),b=t.length,n}function S(t,e,n){if(n===void 0){const c=h.encode(t),a=e(c.length,1)>>>0;return w().subarray(a,a+c.length).set(c),b=c.length,a}let r=t.length,_=e(r,1)>>>0;const s=w();let i=0;for(;i<r;i++){const c=t.charCodeAt(i);if(c>127)break;s[_+i]=c}if(i!==r){i!==0&&(t=t.slice(i)),_=n(_,r,r=i+t.length*3,1)>>>0;const c=w().subarray(_+i,_+r),a=h.encodeInto(t,c);i+=a.written,_=n(_,r,i,1)>>>0}return b=i,_}function O(t){const e=o.__wbindgen_externrefs.get(t);return o.__externref_table_dealloc(t),e}let R=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});R.decode();const v=2146435072;let j=0;function z(t,e){return j+=e,j>=v&&(R=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),R.decode(),j=e),R.decode(w().subarray(t,t+e))}const h=new TextEncoder;"encodeInto"in h||(h.encodeInto=function(t,e){const n=h.encode(t);return e.set(n),{read:t.length,written:n.length}});let b=0;typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>o.__wbg_audioinfo_free(t>>>0,1));const T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>o.__wbg_floinfo_free(t>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>o.__wbg_wasmstreamingdecoder_free(t>>>0,1));class A{static __wrap(e){e=e>>>0;const n=Object.create(A.prototype);return n.__wbg_ptr=e,T.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_floinfo_free(e,0)}get sample_rate(){return o.floinfo_sample_rate(this.__wbg_ptr)>>>0}get total_frames(){const e=o.floinfo_total_frames(this.__wbg_ptr);return BigInt.asUintN(64,e)}get duration_secs(){return o.floinfo_duration_secs(this.__wbg_ptr)}get lossy_quality(){return o.floinfo_lossy_quality(this.__wbg_ptr)}get compression_ratio(){return o.floinfo_compression_ratio(this.__wbg_ptr)}get version(){let e,n;try{const r=o.floinfo_version(this.__wbg_ptr);return e=r[0],n=r[1],y(r[0],r[1])}finally{o.__wbindgen_free(e,n,1)}}get channels(){return o.floinfo_channels(this.__wbg_ptr)}get is_lossy(){return o.floinfo_is_lossy(this.__wbg_ptr)!==0}get bit_depth(){return o.floinfo_bit_depth(this.__wbg_ptr)}get crc_valid(){return o.floinfo_crc_valid(this.__wbg_ptr)!==0}get file_size(){return o.floinfo_file_size(this.__wbg_ptr)>>>0}}Symbol.dispose&&(A.prototype[Symbol.dispose]=A.prototype.free);function B(t){const e=E(t,o.__wbindgen_malloc),n=b,r=o.decode(e,n);if(r[3])throw O(r[2]);var _=x(r[0],r[1]).slice();return o.__wbindgen_free(r[0],r[1]*4,4),_}function N(t,e,n,r,_){const s=D(t,o.__wbindgen_malloc),i=b;var c=g(_)?0:E(_,o.__wbindgen_malloc),a=b;const l=o.encode(s,i,e,n,r,c,a);if(l[3])throw O(l[2]);var J=F(l[0],l[1]).slice();return o.__wbindgen_free(l[0],l[1]*1,1),J}function k(t){const e=E(t,o.__wbindgen_malloc),n=b,r=o.get_flo_file_info(e,n);if(r[2])throw O(r[1]);return A.__wrap(r[0])}const q=new Set(["basic","cors","default"]);async function L(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.ok&&q.has(t.type)&&t.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function $(){const t={};return t.wbg={},t.wbg.__wbg_Error_52673b7de5a0ca89=function(e,n){return Error(y(e,n))},t.wbg.__wbg_Number_2d1dcfcf4ec51736=function(e){return Number(e)},t.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,n){const r=String(n),_=S(r,o.__wbindgen_malloc,o.__wbindgen_realloc),s=b;f().setInt32(e+4,s,!0),f().setInt32(e+0,_,!0)},t.wbg.__wbg___wbindgen_bigint_get_as_i64_6e32f5e6aff02e1d=function(e,n){const r=n,_=typeof r=="bigint"?r:void 0;f().setBigInt64(e+8,g(_)?BigInt(0):_,!0),f().setInt32(e+0,!g(_),!0)},t.wbg.__wbg___wbindgen_boolean_get_dea25b33882b895b=function(e){const n=e,r=typeof n=="boolean"?n:void 0;return g(r)?16777215:r?1:0},t.wbg.__wbg___wbindgen_debug_string_adfb662ae34724b6=function(e,n){const r=I(n),_=S(r,o.__wbindgen_malloc,o.__wbindgen_realloc),s=b;f().setInt32(e+4,s,!0),f().setInt32(e+0,_,!0)},t.wbg.__wbg___wbindgen_in_0d3e1e8f0c669317=function(e,n){return e in n},t.wbg.__wbg___wbindgen_is_bigint_0e1a2e3f55cfae27=function(e){return typeof e=="bigint"},t.wbg.__wbg___wbindgen_is_function_8d400b8b1af978cd=function(e){return typeof e=="function"},t.wbg.__wbg___wbindgen_is_null_dfda7d66506c95b5=function(e){return e===null},t.wbg.__wbg___wbindgen_is_object_ce774f3490692386=function(e){const n=e;return typeof n=="object"&&n!==null},t.wbg.__wbg___wbindgen_is_string_704ef9c8fc131030=function(e){return typeof e=="string"},t.wbg.__wbg___wbindgen_is_undefined_f6b95eab589e0269=function(e){return e===void 0},t.wbg.__wbg___wbindgen_jsval_eq_b6101cc9cef1fe36=function(e,n){return e===n},t.wbg.__wbg___wbindgen_jsval_loose_eq_766057600fdd1b0d=function(e,n){return e==n},t.wbg.__wbg___wbindgen_number_get_9619185a74197f95=function(e,n){const r=n,_=typeof r=="number"?r:void 0;f().setFloat64(e+8,g(_)?0:_,!0),f().setInt32(e+0,!g(_),!0)},t.wbg.__wbg___wbindgen_string_get_a2a31e16edf96e42=function(e,n){const r=n,_=typeof r=="string"?r:void 0;var s=g(_)?0:S(_,o.__wbindgen_malloc,o.__wbindgen_realloc),i=b;f().setInt32(e+4,i,!0),f().setInt32(e+0,s,!0)},t.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,n){throw new Error(y(e,n))},t.wbg.__wbg_call_abb4ff46ce38be40=function(){return m(function(e,n){return e.call(n)},arguments)},t.wbg.__wbg_done_62ea16af4ce34b24=function(e){return e.done},t.wbg.__wbg_entries_83c79938054e065f=function(e){return Object.entries(e)},t.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,n){let r,_;try{r=e,_=n,console.error(y(e,n))}finally{o.__wbindgen_free(r,_,1)}},t.wbg.__wbg_from_29a8414a7a7cd19d=function(e){return Array.from(e)},t.wbg.__wbg_get_6b7bd52aca3f9671=function(e,n){return e[n>>>0]},t.wbg.__wbg_get_af9dab7e9603ea93=function(){return m(function(e,n){return Reflect.get(e,n)},arguments)},t.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(e,n){return e[n]},t.wbg.__wbg_instanceof_ArrayBuffer_f3320d2419cd0355=function(e){let n;try{n=e instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_instanceof_Object_577e21051f7bcb79=function(e){let n;try{n=e instanceof Object}catch{n=!1}return n},t.wbg.__wbg_instanceof_Uint8Array_da54ccc9d3e09434=function(e){let n;try{n=e instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbg_isArray_51fd9e6422c0a395=function(e){return Array.isArray(e)},t.wbg.__wbg_isSafeInteger_ae7d3f054d55fa16=function(e){return Number.isSafeInteger(e)},t.wbg.__wbg_iterator_27b7c8b35ab3e86b=function(){return Symbol.iterator},t.wbg.__wbg_length_22ac23eaec9d8053=function(e){return e.length},t.wbg.__wbg_length_86ce4877baf913bb=function(e){return e.length},t.wbg.__wbg_length_d45040a40c570362=function(e){return e.length},t.wbg.__wbg_new_1ba21ce319a06297=function(){return new Object},t.wbg.__wbg_new_25f239778d6112b9=function(){return new Array},t.wbg.__wbg_new_6421f6084cc5bc5a=function(e){return new Uint8Array(e)},t.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},t.wbg.__wbg_new_b546ae120718850e=function(){return new Map},t.wbg.__wbg_new_from_slice_41e2764a343e3cb1=function(e,n){return new Float32Array(x(e,n))},t.wbg.__wbg_new_from_slice_f9c22b9153b26992=function(e,n){return new Uint8Array(F(e,n))},t.wbg.__wbg_new_with_length_95ba657dfb7d3dfb=function(e){return new Float32Array(e>>>0)},t.wbg.__wbg_next_138a17bbf04e926c=function(e){return e.next},t.wbg.__wbg_next_3cfe5c0fe2a4cc53=function(){return m(function(e){return e.next()},arguments)},t.wbg.__wbg_prototypesetcall_dfe9b766cdc1f1fd=function(e,n,r){Uint8Array.prototype.set.call(F(e,n),r)},t.wbg.__wbg_set_3f1d0b984ed272ed=function(e,n,r){e[n]=r},t.wbg.__wbg_set_781438a03c0c3c81=function(){return m(function(e,n,r){return Reflect.set(e,n,r)},arguments)},t.wbg.__wbg_set_7df433eea03a5c14=function(e,n,r){e[n>>>0]=r},t.wbg.__wbg_set_cb0e657d1901c8d8=function(e,n,r){e.set(x(n,r))},t.wbg.__wbg_set_efaaf145b9377369=function(e,n,r){return e.set(n,r)},t.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,n){const r=n.stack,_=S(r,o.__wbindgen_malloc,o.__wbindgen_realloc),s=b;f().setInt32(e+4,s,!0),f().setInt32(e+0,_,!0)},t.wbg.__wbg_stringify_655a6390e1f5eb6b=function(){return m(function(e){return JSON.stringify(e)},arguments)},t.wbg.__wbg_value_57b7b035e117f7ee=function(e){return e.value},t.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,n){return y(e,n)},t.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(e){return BigInt.asUintN(64,e)},t.wbg.__wbindgen_cast_cb9088102bce6b30=function(e,n){return F(e,n)},t.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},t.wbg.__wbindgen_init_externref_table=function(){const e=o.__wbindgen_externrefs,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t}function C(t,e){return o=t.exports,W.__wbindgen_wasm_module=e,u=null,d=null,p=null,o.__wbindgen_start(),o}async function W(t){if(o!==void 0)return o;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/convert/assets/reflo_bg-DROH2Zqt.wasm",self.location.href));const e=$();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await L(await t,e);return C(n,r)}let P=!1;async function V(){try{await W("/convert/wasm/reflo_bg.wasm"),P=!0,self.postMessage({id:0,type:"ready"})}catch(t){self.postMessage({id:0,type:"error",error:String(t)})}}V(),self.onmessage=async t=>{const e=t.data,n=e.id??-1;try{if(e.type==="decode"){const r=e.bytes,_=B(r),s=k(r),i={id:n,type:"decodeResult",samples:_,sampleRate:s.sample_rate,channels:s.channels};self.postMessage(i,[_.buffer])}else if(e.type==="encode"){const r=e.samples,_=e.sampleRate,s=e.channels,i=e.bitDepth??32,c=N(r,_,s,i,null),a={id:n,type:"encodeResult",bytes:c};self.postMessage(a,[c.buffer])}}catch(r){self.postMessage({id:n,type:"error",error:String(r)})}}})();
